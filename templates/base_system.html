<!DOCTYPE html>
<html lang="en">
<head>
    {#NOTIFICACIONES WEB#}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="SANTA ELENA">
    <meta name="description" content="Clínica Santa Elene"/>
    <link rel="shortcut icon" type="image/x-icon" href="/static/logo/ep_azul.svg    ">
    {% load static %}
    {% load extras %}

    <title class="capfirst">{% block title %}{{ title }}{% endblock %}</title>
    {% block firstheading %}{% endblock %}
    <!------------BOOTSTRAP5-------->
    <link rel="stylesheet" href="/static/bootstrap5/css/style.css?v=1.2">
    <link rel="stylesheet" href="/static/bootstrap5/css/theme.min.css?v=2.3">
    <link rel="stylesheet" href="/static/bootstrap5/libs/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/bootstrap5/fonts/feather/feather.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/bootstrap-select/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/datatables.net-bs5/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/tippy.js/dist/tippy.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/@mdi/font/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/magnific-popup/dist/magnific-popup.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/@yaireo/tagify/dist/tagify.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/tiny-slider/dist/tiny-slider.css">
    <link rel="stylesheet" href="/static/bootstrap5/libs/simplebar/dist/simplebar.min.css">
    <link rel="stylesheet" href="/static/tbresponsive.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        thead {
            background: #f3f3f3 !important;
        }

        .table tbody tr:hover {
            color: #333;
            background-color: #f2fcff !important;
        }


    </style>
    <!------------ FANCYBOX V4 ------------->
    <link rel="stylesheet" href="/static/fancyboxv4/fancybox.css"/>
    <link rel="stylesheet" href="/static/fancyboxv4/panzoom.css"/>
    <link type="text/css" rel="stylesheet" href="/static/select2/select2.min.css">
    <link href="/static/sweet2/sweetalert2.css" rel="stylesheet"/>
    {#    <link rel="stylesheet" href="/static/fontawesome_6.4.0/css/all.css">#}

    <!----------------- JQUERY-------------------->
    <script type="text/javascript" src="/static/bootstrap5/libs/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript"
            src="/static/bootstrap5/libs/bootstrap/dist/js/bootstrap.bundle.min.js?12.2"></script>

    <script type="text/javascript">

        NotificationJG = {
            success: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                alertaSuccess(msg)
            },
            error: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                alertaDanger(msg)
            },
            warning: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                alertaWarning(msg)
            },
            info: function (msg, header/*=undefined*/, ttime/*=5000*/) {
                alertaInfo(msg)
            }
        };
    </script>

    <!----- BLOQUE PARA EXTRA CSS ------>
    {% block heading %}{% endblock %}
</head>
<body class="bg-grey">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </symbol>
    <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
    </symbol>
    <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
    </symbol>
</svg>
{% include 'navbar.html' %}
<div class="{% block contenedor_clases %}container-fluid py-3 px-md-3{% endblock %}">
    {% if ruta and not request.path == '/' and not request.path == '/panel' %}
        <div class="row">
            <div class="col-md-6 col-lg-9">
                <ul class="breadcrumb">
                    {% for r in ruta %}
                        <li>
                            <span {% if not forloop.first %}class="hidden-phone hidden-tablet visible-desktop"{% endif %}>
                                <a href="{{ r.0 }}" class="bloqueo_pantalla">{{ r.1 }}</a>
                                <span class="divider">/</span>
                            </span>
                        </li>
                    {% endfor %}

                </ul>
            </div>
            <div class="col-md-6 col-lg-3">
                <a style="float: right;"
                   href="{% if ret %}{{ ret }}{% else %}{% block atras %}/{% endblock %}{% endif %}"
                   class='btn btn-default urlatrasbutton bloqueo_pantalla' id="urlatrasbutton"><span
                        class="fa fa-arrow-left"></span> Atr&aacute;s</a>
            </div>
        </div>
    {% endif %}
    {% block canvas %}

    {% endblock %}
</div>
{% if not request.user.is_anonymous and not useModal %}
    <br>
    <br>

    <div id="footer" class="bg-footer text-center fs-6" style="background-color: #034B78!important; color: white">
        <span class="mt-8"><b>CLÍNICA SANTA ELENA</b> - Todos los derechos reservados </span>
    </div>
{% endif %}
<!-- Modales-->
<div class="modal fade static" data-bs-focus="false" id="generic-modal">
    <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable" id="wmodal">
        <div class="modal-content" id="m-content">
            <div class="modal-header py-2">
                <h4 class="modal-title">
                    <i class="fas fa-outdent me-1" id="title-icon"></i> <span id="panel-title">FORMULARIO MODAL</span>
                </h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body py-2">
                <form class="form-horizontal form-modal" autocomplete="off" method="post"
                      enctype="multipart/form-data" action="{{ request.path }}">
                    {% csrf_token %}
                    <div id="panel-body">
                    </div>
                </form>
            </div>
            <div class="modal-footer" id="panel-footer">
                <button type="button" class="btn btn-cian-secondary fs-5" data-bs-dismiss="modal" id="cerrar"><i
                        class="fas fa-close"></i> Cerrar
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="generic-info" aria-hidden="true">
    <div class="modal-dialog" id="wmodal">
        <div class="modal-content" id="m-content" style="border-radius: 1rem!important;">
            <div class="modal-header text-end border-0 pt-3 px-2">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body justify-content-center text-center" id="info_body">
                <img src="/static/images/undraw/caution.png" style="width: 140px;">
                <h2 id="id_title"></h2>
                <p style="font-size: 15px; margin-right: 34px; margin-left: 35px;" id="id_body"></p>
                <div class="py-4">
                    <button href="javascript:void(0);" data-bs-toggle="modal" data-bs-dismiss="modal"
                            class="btn btn-cian-secondary btn-sm"
                            style="width: 40%;  border-radius: 3.2rem; font-size: 15px">
                        Salir
                    </button>
                    <a href="#" class="btn btn-warning btn-sm text-white" id="id_url"
                       style="width: 40%;  border-radius: 3.2rem; font-size: 15px">Ver</a>
                </div>
            </div>
        </div>
    </div>
</div>

{% block more_content %}{% endblock %}
<!-- Modales-->

<div class="modal fade opacity" id="modalConfirm"
     style="z-index: 2060; background-color: rgba(0, 0, 0, 0.4); transition: background-color 0.1s;" tabindex="-1"
     role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title m-2">Confirmación</h4>
            </div>
            <div class="modal-body p-5">
                <p style="font-weight: bold"></p>
            </div>
            <div class="modal-footer m-2">
                <a href="javascript:;" class="btn btn-success action_yes">Si</a>
                <a href="javascript:;" class="btn btn-default action_not">No</a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade opacity static" tabindex="-1" role="dialog" aria-hidden="true" id="confirmacionmodal">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
        </div>
    </div>
</div>

<div class="modal fade opacity static" tabindex="-1" role="dialog" aria-hidden="true" id="eliminacionmodal">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
        </div>
    </div>
</div>

<div class="modal fade opacity static" tabindex="-1" role="dialog" aria-hidden="true" id="viewhtml">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
        </div>
    </div>
</div>

<div class="modal fade opacity " id="modalConfirmAjax" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title m-2">Confirmación</h4>
            </div>
            <div class="modal-body p-5">
            </div>
            <div class="modal-footer m-2">
                <a href="javascript:;" class="btn btn-success action_yes">Si, segur
                    {% if persona and persona.sexo_id == 1 %}a{% elif persona and persona.sexo_id == 2 %}o{% else %}
                        o/a{% endif %}</a>
                <a href="javascript:;" class="btn btn-default action_not">No, llévame de vuelta</a>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="modalConsulta">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <form id="frmConsulta" method="post" enctype="multipart/form-data">{% csrf_token %}
                <div class="modal-header">
                    <h4 class="modal-title"><b id="nombre"></b></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true">×</button>
                </div>
                <div class="modal-body tablaaqui">
                </div>
                <div class="modal-footer" id="footerModalView">
                    <a href="javascript:;" class="btn btn-default" data-bs-dismiss="modal"><i
                            class="fa fa-window-close"></i>
                        Cerrar</a>
                </div>
            </form>
        </div>
    </div>
</div>

<!----------------- BOOTSTRAP5 JS -------------->
<script type="text/javascript" src="/static/bootstrap5/libs/dragula/dist/dragula.min.js"></script>
{#<script type="text/javascript" src="/static/bootstrap5/libs/fullcalendar/main.min.js"></script>#}
<script type="text/javascript" src="/static/bootstrap5/libs/flatpickr/dist/flatpickr.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/inputmask/dist/jquery.inputmask.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/quill/dist/quill.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
<script type="text/javascript"
        src="/static/bootstrap5/libs/file-upload-with-preview/dist/file-upload-with-preview.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/@yaireo/tagify/dist/tagify.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/bs-stepper/dist/js/bs-stepper.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/tiny-slider/dist/min/tiny-slider.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/@popperjs/core/dist/umd/popper.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/tippy.js/dist/tippy-bundle.umd.min.js"></script>
<script type="text/javascript" src="/static/bootstrap5/libs/simplebar/dist/simplebar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-beta1/js/bootstrap.min.js"></script>


<script>
    var dropdownElement = document.querySelector('.dropdown');
    var dropdown = new bootstrap.Dropdown(dropdownElement, {
        popperConfig: {
            strategy: 'fixed',
            modifiers: [
                {
                    name: 'flip',
                    options: {
                        fallbackPlacements: ['top', 'right', 'bottom', 'left']
                    }
                },
                {
                    name: 'preventOverflow',
                    options: {
                        rootBoundary: 'document'
                    }
                }
            ]
        }
    });
</script>
{#<!----- DATATABLE JS ------>#}
{#<script src="/static/bootstrap5/libs/datatables.net/js/jquery.dataTables.min.js"></script>#}
{#<script src="/static/bootstrap5/libs/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>#}
{#<script src="/static/bootstrap5/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>#}
{#<script src="/static/bootstrap5/libs/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js"></script>#}

<link rel="stylesheet" href="/static/datatables/datatables.css?0.1">
<script src="/static/datatables/datatables.js?0.1"></script>
{#<link rel="stylesheet" href="/static/datatables/html2canvas.min.js">#}
<link rel="stylesheet" href="/static/datatables/responsive.bootstrap.min.css">
<script src="/static/datatables/dataTables.responsive.min.js"></script>
{#<script type='text/javascript' src='/static/js/jquery.dataTables.min.js?4.0.0'></script>#}
<script src="/static/datatables/responsive.bootstrap.min.js"></script>
<link rel="stylesheet" href="/static/datatables/dataTables.bootstrap.min.css">
<link rel="stylesheet" href="/static/datatables/buttons.bootstrap.min.css">
<link rel="stylesheet" href="/static/datatables/bootstrap-toggle.min.css">
<script src="/static/datatables/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="/static/datatable/buttons.html5.min.js"></script>

<!----- TEMA PRINCIPAL ------>
<script type="text/javascript" src="/static/bootstrap5/js/theme.min.js?v=1.0"></script>

<!----- SELECT2 JS ------>
<script type="text/javascript" src="/static/select2/select2.min.js"></script>

<!----- FONTAWESOME ------>
{#<script type="text/javascript" src="/static/fontawesome_6.4.0/js/all.js"></script>#}
{#<script src="https://kit.fontawesome.com/a96c5b6f8d.js" crossorigin="anonymous"></script>#}

<!------------ SWEET ALERT2-------->
<script type="text/javascript" src="/static/sweet2/sweetalert2.js"/>
</script>

<!------------ FANCYBOX V4-------->
<script src="/static/fancyboxv4/fancybox.umd.js"></script>


<!----- CARGAR VARIABLES A STORANGE ------>
<script type="text/javascript">
    if (typeof fancybox === 'function') {
        $("[data-fancybox]").fancybox({
            autoSize: false,
            width: '100%',
            height: '100%'
        });
    }
    $(function () {
        {% if legalizacion.documentos %}
            formModalInfo('Tiene {{ legalizacion.pendientes }} documentos pendientes de legalizar', '/repositorio?action=procesoslegalizacion', 'modal-md', '{{ legalizacion.documentos }}')
        {% endif %}
        {% if solipendientesgestordocumental %}
            formModalInfo('Tiene {{ solipendientesgestordocumental }} solicitudes de Gestión Documental pendientes de aprobación', '/repositorio?action=soliprocesos', 'modal-md', '{{ legalizacion.documentos }}')
        {% endif %}
        localStorage.setItem("tiene_persona", '{{ persona }}');
        localStorage.setItem("tiene_check_session", '{{ check_session }}');
    })
</script>

<!----- FUNCIONES REUTILIZABLES JS ------>
<script type="text/javascript" src="/static/bootstrap5/js/utils.js?v=1"></script>


<script type='text/javascript' src="/static/bootstrap5/js/jquery.blockUI.js?v=2.71.0"></script>

<!----- CONTROL MODAL JS ------>
<script type="text/javascript">

    function formModalBase(id, titulo, action, dimension = "modal-lg", footer = true, idex, icon = 'fa-outdent', url = `{{ request.path }}`) {
        bloqueointerface()
        let footer_obj = $('#generic-modal #panel-footer')
        $.ajax({
            type: "GET",
            url: url,
            data: {
                'action': action,
                'id': id,
                'idex': idex,
                'tipo_app': '{{ tipo_app }}',
                'nombreapp': '{{ nombreapp }}',
            },
            success: function (data) {
                $.unblockUI();
                footer ? footer_obj.hide() : footer_obj.show();
                $('#generic-modal #title-icon').removeClass('fa-outdent').addClass(icon)
                $('#generic-modal #wmodal').removeClass('modal-lg modal-md modal-xl modal-fullscreen modal-sm').addClass(dimension)
                if (data.result === true) {
                    $('#generic-modal #panel-body').html(data.data);
                    $('#generic-modal #panel-title').html(titulo.charAt(0).toUpperCase() + titulo.slice(1).toLowerCase());
                    $("#generic-modal").modal({backdrop: 'static'}).modal('show');
                } else if (data.url_redirect) {
                    location.replace(data.url_redirect)
                } else {
                    mensajeDanger('Conflicto en la acción', data.mensaje);
                }
            },
            error: function () {
                $.unblockUI();
                mensajeDanger("Error de conexión.");
            },
            dataType: "json"
        });
    }

    function formModalInfo(cuerpo = '', url_btn = "", dimension = 'modal-lg', args = '', titulo = 'Acción Inmediata Requerida') {
        $('#generic-info #wmodal').removeClass('modal-lg modal-md modal-xl modal-fullscreen modal-sm').addClass(dimension)
        $('#info_body #id_title').html(titulo)
        $('#info_body #id_body').html(cuerpo)
        $('#info_body #id_url').attr('href', url_btn).text('Ver mis procesos')
        $("#generic-info").modal('show');
    }


    function eliminarajax(pk, nombre, accion, url = '{{ request.path }}', titulo = 'Estás por eliminar este registro:') {
        Swal.fire({
            html: `<b>${titulo}</b><p>${nombre}</p>`,
            text: "Esta acción es irreversible",
            type: 'warning',
            showCancelButton: true,
            allowOutsideClick: false,
            confirmButtonText: 'Sí, deseo hacerlo',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.value) {
                $.ajax({
                    type: 'POST',
                    url: '{{ reques.path }}',
                    async: false,
                    data: {
                        csrfmiddlewaretoken: '{{ csrf_token }}',
                        action: accion,
                        id: pk,
                    },
                    dataType: "json",
                    beforeSend: function () {
                        bloqueointerface();
                    }
                }).done(function (data) {
                    setTimeout($.unblockUI, 1);
                    if (data.error === false) {
                        if (data.refresh) {
                            alertaSuccess(data.mensaje)
                            updateItem(data.id)
                        } else {
                            location.reload();
                        }
                    } else {
                        alertaDanger(data.mensaje)
                    }
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    setTimeout($.unblockUI, 1);
                    alertaDanger('Error en el servidor', 10000)
                }).always(function () {
                });
            } else {
            }
        })
    }

    function accionNotificar(pk, nombre, accion, titulo = '', args = '', url_ = '{{request.path}}') {
        Swal.fire({
            html: `<b>${titulo}</b><p>${nombre}</p>`,
            type: 'success',
            showCancelButton: true,
            allowOutsideClick: false,
            confirmButtonText: 'Si, deseo hacerlo',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.value) {
                $.ajax({
                    type: 'POST',
                    url: url_,
                    async: false,
                    data: {
                        csrfmiddlewaretoken: '{{ csrf_token }}',
                        action: accion,
                        id: pk,
                        args: args,
                    },
                    dataType: "json",
                    beforeSend: function () {
                        bloqueointerface();
                    }
                }).done(function (data) {
                    setTimeout($.unblockUI, 1);
                    if (data.result === true) {
                        location.reload();
                    } else {
                        alertaDanger(data.mensaje)
                    }
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    setTimeout($.unblockUI, 1);
                    alertaDanger('Error en el servidor', 10000)
                }).always(function () {
                });
            } else {
            }
        })
    }

    function swalInputAjaxResponse(pk, accion, titulo = 'Estás por eliminar este registro:', text = "Esta acción es irreversible", url = "{{ request.path }}") {
        Swal.fire({
            title: `${titulo}`,
            text: text,
            type: 'warning',
            input: 'textarea',
            inputAttributes: {
                placeholder: 'Ingrese el motivo',
                autocapitalize: 'off'
            },
            showCancelButton: true,
            allowOutsideClick: false,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si, deseo hacerlo!',
            cancelButtonText: 'Cancelar',
            preConfirm: (obser) => {
                if (obser == null || obser == undefined || obser == '') {
                    Swal.showValidationMessage(
                        `Campo requerido`
                    )
                }
            },
        }).then((result) => {
            if (result.value) {
                bloqueointerface();
                $.post(url, {'action': accion, 'id': pk, 'observacion': result.value,}, function (data) {
                    $.unblockUI();
                    if (data.error === false) {
                        location.reload();
                    } else {
                        mensajeWarning(data.mensaje)
                    }
                }, "json");
            } else {
            }
        })
    }


    tipo_formulario = function (elemento) {
        if (elemento.attr('formtype') == 'form-vertical') {
            elemento.find(".control-label").css({'float': 'none'});
            elemento.find(".label-text").css({'text-align': 'left'});
            elemento.find(".control-label").each(function () {
                var contenedor = parseFloat($(this).parent().css('width')) - 5;
                $(this).css({'width': contenedor.toString() + 'px'});
            });
            elemento.find(".control").each(function () {
                var contenedor = parseFloat($(this).parent().css('width')) - 5;
                $(this).css({'width': contenedor.toString() + 'px'});
            });

        } else {
            elemento.find(".control-label").css({'float': 'left'});
            elemento.find(".label-text").css({'text-align': 'right'});
            if (elemento.hasClass('form-modal')) {
                elemento.find(".control-group").each(function () {
                    var contenedor = parseFloat($(this).parent().width());
                    var porciento = (parseFloat($(this).width()) / 100);
                    var tam = parseInt(contenedor * porciento);
                    $(this).css({'width': tam});
                });
            }
            elemento.find(".control-label").each(function () {
                if ($(this).attr('labelwidth')) {
                    $(this).css({'width': $(this).attr('labelwidth')});
                } else {
                    $(this).css({'width': '160px'});
                }
            });
            elemento.find(".control").each(function () {
                var contenedor = $(this).parent().width();
                var label = parseFloat($(this).parent().find('.control-label').width());
                $(this).css({'width': ((contenedor - label) - 20).toString() + 'px'});
            });
        }
        elemento.find(".select2").css({'width': '100%'});
    };

    pop_lista = function (arr, item) {
        for (var i = arr.length; i--;) {
            if (arr[i] === item) {
                arr.splice(i, 1);
            }
        }
    };


</script>


<script type="text/javascript">

    function MenuFijo() {
        var altura = $('.caja-menu').offset().top;
        $(window).on('scroll', function () {
            if ($(window).scrollTop() > altura) {
                $('.caja-menu').addClass('caja-menu-flotante');
            } else {
                $('.caja-menu').removeClass('caja-menu-flotante');
            }
        })
    }

    function soloNumeros(e) {
        var key = window.Event ? e.which : e.keyCode
        return (key >= 48 && key <= 57)
    }

    window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;   //compatibility for firefox and chrome
    var modalposition = 0;
    var mensaje = '';
    var capippriva = ''

    function converToAscii(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase();
    }

    $(function () {
        $('#buscarPeriodo').keyup(function () {
            _this = this;
            $.each($(".listaPeriodosMenu li"), function () {
                if (converToAscii($(this).text().toLowerCase()).indexOf(converToAscii($(_this).val().toLowerCase())) === -1)
                    $(this).hide();
                else
                    $(this).show();
            });
        });

        if (!('contains' in String.prototype)) {
            String.prototype.contains = function (str, startIndex) {
                return -1 !== String.prototype.indexOf.call(this, str, startIndex);
            };
        }

        $("*").focusin(function () {
            $('.datepicker').css({"display": "none"});
        });

        showWaiting = function (titulo, mensaje, close) {
            var panel = $("#waitpanel");
            $("#waitpaneltitle").html(titulo);
            $("#waitpanelbody").html(mensaje);
            if (!close) {
                panel.modal({keyboard: false, backdrop: 'static'});
            }
            panel.modal("show");
        };

        hideWaiting = function () {
            $("#waitpanel").modal("hide");
        };

        sinurlatrasbutton = function () {
            if (location.pathname == '/') {
                $("#urlatrasbutton").remove();
            } else {
                $("#idbuscador").remove();
            }
        };

        deshabilitar = function (nombre) {
            $(nombre).attr({"disabled": "disabled"});
        };

        habilitar = function (nombre) {
            $(nombre).removeAttr("disabled").removeAttr("readonly");
        };

        // Funcion de redondeo que reemplaza a la funcion math.round() de javascript por fallos al redondear
        redondeo = function (numero, presicion) {
            var multiplicador = Math.pow(10, presicion + 1);
            var num_multi = Math.floor(numero * multiplicador);
            var num_redondeado = (Math.round(num_multi / 10)) * 10 / multiplicador;

            if (num_redondeado == 0) {
                return 0;
            } else {
                if (!isNaN(num_redondeado))
                    return num_redondeado;
                else
                    return 0;
            }
        };


        openwindow_reporte = function (url, width, height) {
            newwindow = window.open(url, 'name', 'height=' + height + ' ,width=' + width);
        };

        openwindow = function (verb, url, data, target) {
            var form = document.createElement("form");
            form.action = url;
            form.method = verb;
            form.target = target || "_self";
            if (data) {
                for (var key in data) {
                    var input = document.createElement("textarea");
                    input.name = key;
                    input.value = typeof data[key] === "object" ? JSON.stringify(data[key]) : data[key];
                    form.appendChild(input);
                }
                var csrf = document.createElement("input");
                csrf.name = 'csrfmiddlewaretoken';
                csrf.value = '{{ csrf_token }}';
                form.appendChild(csrf);
            }
            form.style.display = 'none';
            document.body.appendChild(form);
            form.submit();
        };

        fechavalida = function (elemento) {
            var valor = elemento.val().toString();
            //Validate dd/mm/yyyy or dd-mm-yyyy format
            var dateformat = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;
            // Match the date format through regular expression
            if (valor.match(dateformat)) {
                //Test which seperator is used '/' or '-'
                var opera1 = valor.split('/');
                var opera2 = valor.split('-');
                lopera1 = opera1.length;
                lopera2 = opera2.length;
                // Extract the string into month, date and year
                if (lopera1 > 1) {
                    var pdate = valor.split('/');
                } else if (lopera2 > 1) {
                    var pdate = valor.split('-');
                }
                var dd = parseInt(pdate[0]);
                var mm = parseInt(pdate[1]);
                var yy = parseInt(pdate[2]);
                // Create list of days of a month [assume there is no leap year by default]
                var ListofDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                if (mm == 1 || mm > 2) {
                    if (dd > ListofDays[mm - 1]) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                }
                if (mm == 2) {
                    var lyear = false;
                    if ((!(yy % 4) && yy % 100) || !(yy % 400)) {
                        lyear = true;
                    }
                    if ((lyear == false) && (dd >= 29)) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                    if ((lyear == true) && (dd > 29)) {
                        //alert('Invalid date format!');
                        elemento.val(fechaactual());
                        return;
                    }
                }
            } else {
                //alert("Invalid date format!");
                elemento.val(fechaactual());
                return;
            }
            //return;
        };

        fechaactual = function () {
            var d = new Date();
            var month = d.getMonth() + 1;
            var day = d.getDate();
            var fecha = (day < 10 ? '0' : '') + day + '-' + (month < 10 ? '0' : '') + month + '-' + d.getFullYear();
            return fecha;
        };

        numerico = function (elemento, min, max, decimales) {
            var nvalor;
            var valor = elemento.val();
            if (valor == "") {
                valor = parseFloat(0).toFixed(decimales);
                elemento.val(valor);
                return;
            }
            if (isNaN(valor)) {
                nvalor = parseFloat(min).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            if (valor < min) {
                nvalor = parseFloat(min).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            if (max > 0 && valor > max) {
                nvalor = parseFloat(max).toFixed(decimales);
                elemento.val(nvalor);
                return;
            }
            nvalor = parseFloat(valor).toFixed(decimales);
            elemento.val(nvalor);
        };

        digitos = function (elemento) {
            var valor = elemento.val();
            if (valor == "") {
                elemento.val("");
                return;
            }
            if (isNaN(valor)) {
                elemento.val("");
                return;
            } else if (valor.indexOf("-") != -1 || valor.indexOf(".") != -1 || valor.indexOf(",") != -1) {
                elemento.val("");
                return;
            } else {
                elemento.val(valor.trim());
            }
        };

        validacionesnumericas = function () {
            $(".validarnumero").blur(function () {
                numerico($(this), 0, 0, 0);
            });

            $(".validarmoneda").blur(function () {
                numerico($(this), 0, 0, 2);
            });
        };

        sinurlatrasbutton();

        $(".listaperiodos").click(function () {
            $("#periodospanel").modal("show");
        });

        $("#cerrarperiodospanel").click(function () {
            $("#periodospanel").modal("hide");
        });

        cerrar_viewhtml = function () {
            $("#viewhtml").modal("hide");
        };

        $("#seleccionarperiodospanel").click(function () {
            var pid = $("#periodoselectorall").val();
            $("#periodospanel").modal("hide");
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/",
                data: {'action': 'periodo', 'id': pid},
                success: function (data) {
                    if (data.result == 'ok') {
                        location.href = location.pathname;
                    } else {
                        $.unblockUI();
                        mensajeWarning("Error al cambiar de periodo");
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error al cambiar de periodo");
                },
                dataType: "json"
            });
        });

        {% if chequear_correo %}
            chequearemial = function () {
                $.ajax({
                    type: "POST",
                    url: "/api",
                    data: {'a': 'checkmail'},
                    success: function (data) {
                        if (data.result == 'ok') {
                            if (data.mensajes) {
                                $("#checkmailicon").removeClass("hidden").show();
                            } else {
                                $("#checkmailicon").addClass("hidden").hide();
                            }
                        }
                    },
                    dataType: "json"
                });
            };

            setInterval(chequearemial, 60000);
        {% endif %}


        serverdate = new Date({{ currenttime.year }}, {{ currenttime.month }}-1, {{ currenttime.day }}, {{ currenttime.hour }}, {{ currenttime.minute }}, {{ currenttime.second }}, 0);
        clientdate = new Date();

        showTime = function () {
            var m;
            var today = new Date();
            var timediff = today - clientdate;
            var renderdate = new Date(serverdate.getTime() + timediff);
            var h = renderdate.getHours();
            var mer = " AM";
            if (h > 12) {
                mer = " PM";
                h -= 12;
            }
            m = renderdate.getMinutes();
            m = checkTime(m);
            $("#clock").text(h + ":" + m + mer);
        };

        checkTime = function (i) {
            if (i < 10) {
                i = "0" + i;
            }
            return i;
        };

        setInterval(showTime, 15000);

        showTime();

        $('.dropdown-toggle').dropdown();
        {#$(".collapse").collapse();#}
        $('.tips').tooltip({});

        $(".periodoselector").click(function () {
            var pid = $(this).attr('pid');
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/",
                data: {'action': 'periodo', 'id': pid},
                success: function (data) {
                    if (data.result == 'ok') {
                        location.href = location.pathname;
                    } else {
                        $.unblockUI();
                        mensajeWarning("Error al cambiar de periodo");
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error al cambiar de periodo");
                },
                dataType: "json"
            });
        });

        $("#id_email, #id_emailinst, #id_correoinstasoc, #id_correoinst").css({'text-transform': 'none'});

        $("table tbody tr").hover(function () {
            $(this).addClass("info");
        }, function () {
            $(this).removeClass("info");
        });

        $(".btn-form").click(function () {
            bloqueointerface();
        });

        $(".bloqueo_pantalla").click(function () {
            bloqueointerface();
        });

        if (typeof String.prototype.startsWith != 'function') {
            String.prototype.startsWith = function (str) {
                return this.indexOf(str) == 0;
            };
        }

        if (typeof String.prototype.endsWith != 'function') {
            String.prototype.endsWith = function (str) {
                return this.slice(-str.length) == str;
            };
        }

        abrir_reporte = function () {
            var href = $(this).attr('nhref');
            var tipos = $(this).attr('tipos');
            if (!tipos) {
                tipos = "pdf, xls, csv, doc";
            }
            if (tipos.contains("pdf")) {
                $("#formatopdf").removeAttr("hidden");
            } else {
                $("#formatopdf").attr({"hidden": "hidden"});
            }
            if (tipos.contains("doc")) {
                $("#formatodoc").removeAttr("hidden");
            } else {
                $("#formatodoc").attr({"hidden": "hidden"});
            }
            if (tipos.contains("xls")) {
                $("#formatoxls").removeAttr("hidden");
            } else {
                $("#formatoxls").attr({"hidden": "hidden"});
            }
            if (tipos.contains("csv")) {
                $("#formatocsv").removeAttr("hidden");
            } else {
                $("#formatocsv").attr({"hidden": "hidden"});
            }
            if (tipos.length > 4) {
                primero = $("#formatoreporte_formato").find("option:first").val();
                $("#formatoreporte_formato").val(primero);
                $('#formatoreporte').modal('show');
                $('#formatoreporte_run').attr('nhref', href);
                console.log('1')
            } else {
                primero = $("#formatoreporte_formato").find("option:first").val();
                $("#formatoreporte_formato").val(primero);
                ejecutar_reporte_directo(href);

            }

        };

        cerrar_reporte = function () {
            $('#formatoreporte').modal('hide');
        };

        ejecutar_reporte_directo = function (ruta) {
            var href = ruta;
            $('#formatoreporte').modal('hide');
            var formato = $('#formatoreporte_formato').val();
            var formato_final = '';
            if (formato == 0) {
                formato_final = '&rt=pdf';
            } else if (formato == 1) {
                formato_final = '&rt=docx';
            } else if (formato == 2) {
                formato_final = '&rt=xlsx';
            } else if (formato == 3) {
                formato_final = '&rt=csv';
            }
            bloqueointerface();
            var report_url = href + formato_final;
            $.ajax({
                type: "POST",
                url: report_url,
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        if (formato == 0) {
                            openwindow_reporte(location.origin + data.reportfile, 800, 500);
                        } else {
                            location.href = location.origin + data.reportfile;
                        }
                    } else {
                        mensajeWarning("Error al generar el reporte");
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error al generar el reporte");
                },
                dataType: "json"
            });
        };

        ejecutar_reporte = function () {
            var href = $(this).attr('nhref');
            $('#formatoreporte').modal('hide');
            var formato = $('#formatoreporte_formato').val();
            var formato_final = '';
            if (formato == 0) {
                formato_final = '&rt=pdf';
            } else if (formato == 1) {
                formato_final = '&rt=docx';
            } else if (formato == 2) {
                formato_final = '&rt=xlsx';
            } else if (formato == 3) {
                formato_final = '&rt=csv';
            }
            bloqueointerface();
            var report_url = href + formato_final;
            {#alert(report_url);#}
            $.ajax({
                type: "POST",
                url: report_url,
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        if (formato == 0) {
                            openwindow_reporte(location.origin + data.reportfile, 800, 500);
                        } else {
                            location.href = location.origin + data.reportfile;
                        }
                    } else {
                        mensajeWarning("Error al generar el reporte");
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error al generar el reporte");
                },
                dataType: "json"
            });
        };

        {% if mensj or info %}
            Swal.fire({
                toast: false,
                position: 'center',
                icon: "error",
                type: 'error',
                title: mensaje,
                html: `{{ mensj }}{{ info }}`,
                showConfirmButton: true
            });
        {% endif %}

        conectar_confirmacion = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                        $("#confirmacionmodal .modal-dialog .modal-content").html(data);
                        $('#confirmacionmodal').modal({'width': '650'}).modal('show');
                        {#Se agregó para que se cierre el offcanvas con las opciones cuando se muestra el modal y no se superpongan#}
                        {#let close_offcamvas = document.getElementById("close-offcanvas");#}
                        close_offcamvas.click();

                    } else {
                        mensajeWarning("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "html"
            });
        };

        conectar_eliminacion = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxdeletedinamicbs' + '"') >= 0) {
                        $("#eliminacionmodal .modal-dialog .modal-content").html(data);
                        $('#eliminacionmodal').modal({'width': '650'}).modal('show');
                        {#Se agregó para que se cierre el offcanvas con las opciones cuando se muestra el modal y no se superpongan#}
                        {#let close_offcamvas = document.getElementById("close-offcanvas");#}
                        {#close_offcamvas.click();#}
                    } else {
                        mensajeWarning("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "html"
            });
        };

        conectar_viewhtml = function () {
            var href = $(this).attr('nhref');
            bloqueointerface();
            $.ajax({
                type: "GET",
                url: href,
                success: function (data) {
                    $.unblockUI();
                    if (data.search('"' + 'ajaxconfirmaciondinamicbs' + '"') >= 0) {
                        $("#viewhtml .modal-dialog .modal-content").html(data);
                        $('#viewhtml').modal({'width': '650'}).modal('show');
                        $('.cerrarviewhtml').bind('click.cerrar_viewhtml', cerrar_viewhtml);
                    } else {
                        mensajeWarning("Error de conexión.");
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "html"
            });
        };


        $('.confirmacionmodal').bind('click.conectar_confirmacion', conectar_confirmacion);
        $('.viewhtml').bind('click.conectar_viewhtml', conectar_viewhtml);
        $('.eliminacionmodal').bind('click.conectar_eliminacion', conectar_eliminacion);
        $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
        $("#formatoreporte_run").bind("click.ejecutar_reporte", ejecutar_reporte);
        $("#formatoreporte_close").bind("click.cerrar_reporte", cerrar_reporte);

        conectar_reporte = function () {
            $(".reportedirecto").unbind("click.conectar_reporte");
            $(".reportedirecto").bind("click.conectar_reporte", abrir_reporte);
        };

        tooltips = function () {
            $(".tl").tooltip({placement: "left"});
            $(".tr").tooltip({placement: "right"});
            $(".tu").tooltip({placement: "top"});
            $(".tb").tooltip({placement: "bottom"});
        };

        tooltips();

        $('.selectorfecha').keypress(function () {
            return false;
        });

        history.pushState(null, null, location.href);
        window.addEventListener('popstate', function (event) {
            history.pushState(null, null, location.href);
        });

        actualizarnumerico = function () {
            $('.imp-number[decimal], .imp-moneda[decimal], .imp-numbersmall[decimal], .imp-numbermed-right[decimal], .imp-numbermed-center[decimal], .nota[decimal]').each(function () {
                numerico($(this), 0, 0, $(this).attr('decimal'));
            })
        };

        escapeHTMLEncode = function (str) {
            var div = document.createElement('div');
            var text = document.createTextNode(str);
            div.appendChild(text);
            return div.innerHTML;
        };

        actualizarnumerico();

        $('.imp-number, .imp-moneda, .imp-numbersmall, .imp-numbermed-right, .imp-numbermed-center, .nota').focus(function () {
            if (!parseFloat($(this).val())) {
                $(this).val("");
            }
        });

        $('.selectorfecha').keypress(function () {
            return false;
        });


        $('.viewNotification_b').click(function () {
            var id = $(this).attr('id');
            var _href = $(this).attr('_href');
            bloqueointerface();
            $.ajax({
                type: "POST",
                url: "/notificacion",
                data: {'action': 'ViewedNotification', 'id': id},
                success: function (data) {
                    $.unblockUI();
                    if (data.result == 'ok') {
                        window.open(_href, '_blank');
                        location.reload()
                    } else {
                        mensajeWarning(data.mensaje);
                    }
                },
                error: function () {
                    $.unblockUI();
                    mensajeWarning("Error de conexión.");
                },
                dataType: "json"
            });
        });


        /*$('.button').on('click', function() {
            $.ajax({
                url: 'adm_tasks/',
                data: { action: 'loadType', type: $(this).data('type') },
                method: 'POST',
            })
            .done((res) => {
                getStatus(res.task_id);
            })
            .fail((err) => {
                console.log(err);
            });
        });*/

    });

    /*function getStatus(taskID) {
        $.ajax({
            url: 'adm_tasks/${taskID}/',
            method: 'GET'
            })
        .done((res) => {
            const html ='<tr><td>${res.task_id}</td><td>${res.task_status}</td> <td>${res.task_result}</td> </tr>'
            $('#tasks').prepend(html);

            const taskStatus = res.task_status;

            if (taskStatus === 'SUCCESS' || taskStatus === 'FAILURE') return false;
            setTimeout(function() {
                getStatus(res.task_id);
            }, 1000);
        })
        .fail((err) => {
            console.log(err)
        });
    }*/


    //aqui entra
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    var csrftoken = getCookie('csrftoken');

    function csrfSafeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });

    $(function () {
        {% if messages %}
            {% for message in messages %}
                console.log(`{{ message }}`)
                Swal.fire({
                    toast: true,
                    position: 'top-end',
                    type: '{% if message.tags %}{{ message.tags }}{% endif %}',
                    title: `{{ message }}`,
                    showConfirmButton: false,
                    timer: 17000
                })
                var swal2Content = document.querySelector('.swal2-content');
                swal2Content.remove();
            {% endfor %}
        {% endif %}
    })

    $(function () {

        $(".tl").tooltip({placement: "top"});
        var cant_filas = $('.tabla_responsive tbody tr').length;
        if (cant_filas > 1){
            var tabla = $('.tabla_responsive').DataTable({
                responsive: true,
                ordering: false,
                paging: false,
                searching: false,
                bInfo: false,
                dom: 'Bfrtip',
                language: {
                    "url": '/static/js/i18n/Spanish.json'
                },
                buttons: []
            });
            tabla.buttons().container().appendTo('.tabla_responsive .col-md-6:eq(0)');
            $('.tabla_responsive tbody').on('click', 'tr', function () {
                var data = tabla.row(this).data();
            });
        }

        const tabla_responsive_scroll = $('.tabla_responsive_scroll').DataTable({
            responsive: false,
            scrollX: true,
            ordering: false,
            paging: false,
            searching: false,
            bInfo: false,
            language: {
                "url": '/static/js/i18n/Spanish.json'
            }
        });

        $('.tabla_responsive_scroll tbody').on('click', 'tr', function () {
            var data = tabla_responsive_scroll.row(this).data();
        });

        const tabla_responsive_scroll_paging = $('.tabla_responsive_scroll_paging').DataTable({
            responsive: false,
            scrollX: true,
            ordering: false,
            paging: true,
            searching: false,
            bInfo: false,
            language: {
                "url": '/static/js/i18n/Spanish.json'
            }
        });

        $('.tabla_responsive_scroll_paging tbody').on('click', 'tr', function () {
            var data = tabla_responsive_scroll_paging.row(this).data();
        });

        $(".action-close", $("#modalPeriodos")).click(function () {
            $("#modalPeriodos").modal('hide');
        })


    });


    function consultar(pk, accion, nombre, ruta, ocultarcerrar = false, valor = 0, campo = 'default') {
        $.ajax({
            type: "GET",
            url: `/${ruta}`,
            data: {'action': accion, 'id': pk, 'adicionalvalor': valor, 'adicionalcampo': campo},
            success: function (data) {
                if (data.result === true) {
                    if (ocultarcerrar === true) {
                        $('#footerModalView').hide();
                    }
                    $('.tablaaqui').html(data.data)
                    $('#frmConsulta #nombre').html(nombre);
                    $('#modalConsulta').modal({"backdrop": "static", "width": "1000px"}).modal("show");
                } else {
                    mensajeWarning(data.mensaje);
                }
            },
            error: function () {
                smoke.alert("Error de conexión.");
            },
            dataType: "json"
        });
    }

    $(document).ready(function () {
        const tabla_paginada_nosearch = $('.tabla_paginada_nosearch').DataTable({
            responsive: true,
            ordering: false,
            paging: true,
            searching: false,
            bInfo: true,
            dom: "<'row'<'col-sm-12 col-md-3'f><'col-sm-12 col-md-3'l><'col-sm-12 col-md-4'B>>" +
                "<'row'<'col-sm-12'tr>>" +
                "<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
            {#dom: 'Bfrtip',#}
            language: {
                "url": '/static/js/i18n/Spanish.json'
            },
            buttons: []
        });
        tabla_paginada_nosearch.buttons().container().appendTo('.tabla_paginada_nosearch .col-md-6:eq(0)');

        $('.tabla_paginada_nosearch tbody').on('click', 'tr', function () {
            var data = tabla_paginada_nosearch.row(this).data();
        });
    });
</script>

<!----- CONTENEDOR PARA JS EXTRA ------>
{% block content_js %}{% endblock %}
{% block js %}{% endblock %}
</body>
</html>



